# 1.レンダリングの要素
- 概要
  - コントローラとビューの間でのやりとり
  - ユーザーに送信すべきレスポンスの内容を決定し、次にユーザーへのレスポンスを作成する適切なメソッドを呼び出す
# 2.レスポンスを作成する
- HTTPレスポンスの作成方法
  - renderを呼び出す
  - 完全なレスポンスを作成してブラウザに送信する
  - redirect_toを呼び出す
  - HTTPリダイレクトステータスコードをブラウザに送信する
  - headを呼び出す
  - HTTPヘッダーのみのレスポンスを作成してブラウザに送信する
## 2.1 デフォルトのレンダリング（アクションにおける「設定より規約」）
### デフォルトのレンダリング
- コントローラの流れ
  - 「コントローラのアクションの末尾で明示的にレンダリングが指示されていない場合は、コントローラが利用可能なビューのパスからアクション名.html.erbというビューテンプレートを探し、それを使って自動的にレンダリングする」
1. BooksController
  class BooksController < ApplicationController
  end
2. ルーティングファイル
  - resources :books
3. app/view/books/index.html.erbビューファイル
  - <h1>Books are comig soon!</h1>
4. レスポンスをレンダリングし、<h1>が画面に表示される
  - ブラウザで/booksにアクセスすると自動的にapp/view/books/index.html.erbビューを利用してレスポンスをレンダリングし、その結果<h1>が画面に表示される
- 例：Bookモデルを作成し、BooksControllerにindexアクションを追加
  - app/views/books/index.html.erbファイルがレンダリング
```
class BooksController < ApplicationController
  def index
    @books = Book.all
  end
end
```
## 2.2 renderメソッドを使う
- 概要
  - アプリケーションがブラウザで表示するコンテンツのレンダリングのほとんどは、コントローラのrenderメソッド
### 2.2.1 Action Viewでレンダリングする
 - 概要
  - 同じコントローラからデフォルト以外のテンプレートに対応するビューをレンダリングしたい場合は、renderメソッドでビュー名を指定できる
 ```
 def update
  @book = Book.find(params[:id])
  if @book.update(book_params)
    redirect_to(@book)
  else
    render "edit"
    (render :edit, status: :unprocessable_entity)
  end
 end
 ```
 - updateメソッドの呼び出しが失敗した場合
  - 同じコントローラに用意しておいた別のedit.html.erbテンプレートがレンダリングで使われる
  - レンダリングするアクションは、文字列の他にシンボルでも指定できる
### 2.2.2 別のコントローラからアクションテンプレートをレンダリングする
 - 概要
  - renderメソッドにはapp/viewsを起点とするフルパスを渡せるので、レンダリングするテンプレートをフルパスで指定できる
 - app/controllers/adminにあるAdminProductsコントローラのコードを実行する場合
  - 以下のように書くことでアクションの実行結果をapp/views/productsに置かれているビューテンプレートでレンダリングできる
 ```
 render "products/show"
 ```
  - パスにスラッシュ/が含まれていると、Railsはこのビューが別のコントローラの配下にあることを認識する
  - 別のコントローラのテンプレートを指定していることを明示的に指定したい場合は、以下のようにtemplate:オプションを使うこともできます
```
render template: "products/show"
```
### 2.2.3 まとめ
- これまでのレンダリング方法は同じアクションのバリエーションにすぎない
  - 以下のどのレンダリング呼び出しを使っても、最終的なレンダリングではviews/booksディレクトリのedit.html.erbが使われる
```
render :edit
render action: :edit
render "edit"
render action: "edit"
render "books/edit"
render template: "books/edit"
```

